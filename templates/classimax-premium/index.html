<!DOCTYPE html>
<html lang="en">
<head>

  <!-- SITE TITTLE -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Estia Group</title>

  <!-- FAVICON -->
  <link href="img/favicon.png" rel="shortcut icon">
  <!-- PLUGINS CSS STYLE -->
  <!-- <link href="plugins/jquery-ui/jquery-ui.min.css" rel="stylesheet"> -->
  <!-- Bootstrap -->
  <link rel="stylesheet" href="plugins/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="plugins/bootstrap/css/bootstrap-slider.css">
  <!-- Font Awesome -->
  <link href="plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet">
  <!-- Owl Carousel -->
  <link href="plugins/slick-carousel/slick/slick.css" rel="stylesheet">
  <link href="plugins/slick-carousel/slick/slick-theme.css" rel="stylesheet">
  <!-- Fancy Box -->
  <link href="plugins/fancybox/jquery.fancybox.pack.css" rel="stylesheet">
  <link href="plugins/jquery-nice-select/css/nice-select.css" rel="stylesheet">
  <!-- CUSTOM CSS -->
  <link href="css/style.css" rel="stylesheet">


  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

</head>

<body class="body-wrapper" >


<section>
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<nav class="navbar navbar-expand-lg navbar-light navigation">
					<a class="navbar-brand" href="index.html">
						<img src="images/eglogo_resized_removebg.png" alt="">
					</a>
					<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
					 aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
						<span class="navbar-toggler-icon"></span>
					</button>
					<div class="collapse navbar-collapse" id="navbarSupportedContent">
						<ul class="navbar-nav ml-auto main-nav ">
							<li class="nav-item active">
								<a class="nav-link" href=#Footer style="border-style:solid; border-color:#375FA1; color:#375FA1"><b>Contact</b></a>
							</li>
							<li class="nav-item dropdown dropdown-slide">

						</ul>
					</div>
				</nav>
			</div>
		</div>
	</div>
</section>

<!--===============================
=            Hero Area           =
================================-->

<section class="hero-area  text-center overly" style="background-image: url('images/greece.jpg')">
	<!-- Container Start -->
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<!-- Header Contetnt -->
				<div class="content-block">
					<h1>Your Dream Home Is Here! </h1>
					<p>Search through heaps of listings <br> to find your new Greek home</p>
					<div class="short-popular-category-list text-center">
						<ul class="list-inline" >
							<li class="list-inline-item" style="border-style:solid; border-color:#FBEAFF; color:#FBEAFF" >
								<a href=#houseStats><i class="fa fa-home"></i> Houses</a></li>
							<li class="list-inline-item" style="border-style:solid; border-color:#FBEAFF; color:#FBEAFF">
								<a href=#apartmentStats><i class="fa fa-building"></i> Apartments</a>
							</li>
						</ul>
					</div>

				</div>
				<!-- Advance Search -->
				<div class="advance-search" >
						<div class="container">
							<div class="row justify-content-center">
								<div class="col-lg-12 col-md-12 align-content-center">
										<form id="deals">
											<div class="form-row">
												<div class="form-group col-md-5">
													<select input type="text" class="w-100 form-control mt-lg-1 mt-md-2"  id="category" placeholder="category">
														<option value="Apartment">Apartments</option>
														<option value="House">Houses</option>
														<option value="ALL">Show all</option>
													</select>
												</div>
												<div class="form-group col-md-5">
													<select input type="text" class="w-100 form-control mt-lg-1 mt-md-2" id="location" placeholder="location">
                            <option value="Trikala">Trikala</option>
                            <option value="Mesologgi">Mesologgi</option>
                            <option value="Crete">Crete</option>
                          </select>
												</div>
												<div class="form-group col-md-2 align-self-center">
													<button type="submit" class="btn btn-primary" style="background-color:#375FA1; border-color:#375FA1" >Search Now</button>
												</div>
											</div>
										</form>
									</div>
								</div>
					</div>
				</div>

			</div>
		</div>
	</div>
	<!-- Container End -->
</section>




<!--===========================================
=            Popular deals section            =
============================================-->

<section class="popular-deals section" style="background-color:#FBEAFF">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="section-title" id="table_title">
					<h2>Your Potential Home(s) </h2>

				</div>
			</div>
      <div class="table-responsive table-hover" style="height:150px">
        <table id="deals_results" class="table" >
          <thead>
            <tr>
              <th>Title</th>
              <th>Price (&euro;)</th>
              <th>Price/sqm (&euro;/m<sup>2</sup>)</th>
              <th>Level</th>
              <th>Bedrooms</th>
              <th>Bathrooms</th>
              <th>Year</th>
                
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
		</div>
		<div class="row">


					</div>
				</div>
			</div>


		</div>
	</div>
</section>



<!--==========================================
=            All Category Section            =
===========================================-->

<section class=" section" >
	<!-- Container Start -->
	<div class="container">
		<div class="row">
			<div class="col-12">
				<!-- Section title -->
				<div class="section-title">
					<h2>Some Statistics For You</h2>
					<p>Here are some statistics to help you find your dream place easier</p>
				</div>

        <div class="section-title" id="apartmentStats">
          <h3>Apartments</h3>
        </div>
				<div class="row">

					<!-- Category list -->
					<div class="col-lg-4 offset-lg-0 col-md-5 offset-md-1 col-sm-6 col-6" style="background-color:white">
						<div class="category-block">
							<div class="header">
								<i class="fa fa-building icon-bg-1"></i>
								<h4>Trikala</h4>
							</div>
							<ul class="category-list" style="text-align:center ;" >
								<li>Avg Price/sqm <span id="1" style="color:rgb(65, 130, 65) ;"></span></li>
								<li>Avg Bathrooms <span id="2" style="color:green ;"></span></li>
								<li>Avg Bedrooms  <span id="3" style="color:green ;"></span></li>
								<li>Newest Apt. <span id="4" style="color:green ;"></span></li>
                <li>Oldest Apt. <span id="5" style="color:green ;"></span></li>
							</ul>
						</div>
					</div> <!-- /Category List -->
					<!-- Category list -->
					<div class="col-lg-4 offset-lg-0 col-md-5 offset-md-1 col-sm-6 col-6" style="background-color:white">
						<div class="category-block">
							<div class="header">
								<i class="fa fa-building icon-bg-2"></i>
								<h4>Mesologgi</h4>
							</div>
							<ul class="category-list" style="text-align:center ;" >
                <li>Avg Price/sqm <span id="6" style="color:rgb(144, 72, 180) ;"></span></li>
                <li>Avg Bathrooms <span id="7" style="color:rgb(144, 72, 180) ;"></span></li>
                <li>Avg Bedrooms  <span id="8" style="color:rgb(144, 72, 180) ;"></span></li>
                <li>Newest Apt. <span id="9" style="color:rgb(144, 72, 180) ;"></span></li>
                <li>Oldest Apt. <span id="10" style="color:rgb(144, 72, 180) ;"></span></li>
							</ul>
						</div>
					</div> <!-- /Category List -->
					<!-- Category list -->
					<div class="col-lg-4 offset-lg-0 col-md-5 offset-md-1 col-sm-6 col-6" style="background-color:white">
						<div class="category-block">
							<div class="header">
								<i class="fa fa-building icon-bg-3"></i>
								<h4>Crete</h4>
							</div>
							<ul class="category-list" style="text-align:center ;" >
                <li>Avg Price/sqm <span id="11" style="color:orange ;"></span></li>
                <li>Avg Bathrooms <span id="12" style="color:orange ;"></span></li>
                <li>Avg Bedrooms  <span id="13" style="color:orange ;"></span></li>
                <li>Newest Apt. <span id="14" style="color:orange ;"></span></li>
                <li>Oldest Apt. <span id="15" style="color:orange ;"></span></li>
							</ul>
						</div>
					</div> <!-- /Category List -->

          </div>
          <div class="row">
            <div class="col-12">
              <div class="section-title" id="houseStats">
                <br>
                <h3>Houses</h3>
                </div>


          <div class="row">

					<!-- Category list -->
					<div class="col-lg-4 offset-lg-0 col-md-5 offset-md-1 col-sm-6 col-6" style="background-color:white">
						<div class="category-block">
							<div class="header">
								<i class="fa fa-home icon-bg-1"></i>
								<h4>Trikala</h4>
							</div>
							<ul class="category-list" style="text-align:center ;">
                <li>Avg Price/sqm <span id="16" style="color:rgb(65, 130, 65) ;"></span></li>
								<li>Avg Bathrooms <span id="17" style="color:rgb(65, 130, 65) ;"></span></li>
								<li>Avg Bedrooms  <span id="18" style="color:rgb(65, 130, 65) ;"></span></li>
								<li>Newest Apt. <span id="19" style="color:rgb(65, 130, 65) ;"></span></li>
                <li>Oldest Apt. <span id="20" style="color:rgb(65, 130, 65) ;"></span></li>
							</ul>
						</div>
					</div> <!-- /Category List -->
					<!-- Category list -->
					<div class="col-lg-4 offset-lg-0 col-md-5 offset-md-1 col-sm-6 col-6" style="background-color:white">
						<div class="category-block" >
							<div class="header">
								<i class="fa fa-home icon-bg-2"></i>
								<h4>Mesologgi</h4>
							</div>
							<ul class="category-list" style="text-align:center ;">
                <li>Avg Price/sqm <span id="21" style="color:rgb(144, 72, 180) ;"></span></li>
                <li>Avg Bathrooms <span id="22" style="color:rgb(144, 72, 180) ;"></span></li>
                <li>Avg Bedrooms  <span id="23" style="color:rgb(144, 72, 180) ;"></span></li>
                <li>Newest Apt. <span id="24" style="color:rgb(144, 72, 180) ;"></span></li>
                <li>Oldest Apt. <span id="25" style="color:rgb(144, 72, 180) ;"></span></li>
							</ul>
						</div>
					</div> <!-- /Category List -->
					<!-- Category list -->
					<div class="col-lg-4 offset-lg-0 col-md-5 offset-md-1 col-sm-6 col-6" style="background-color:white">
						<div class="category-block">
							<div class="header">
								<i class="fa fa-home icon-bg-3"></i>
								<h4>Crete</h4>
							</div>
							<ul class="category-list" style="text-align:center ;">
                <li>Avg Price/sqm <span id="26" style="color:orange ;"></span></li>
								<li>Avg Bathrooms <span id="27" style="color:orange ;"></span></li>
								<li>Avg Bedrooms  <span id="28" style="color:orange ;"></span></li>
								<li>Newest Apt. <span id="29" style="color:orange ;"></span></li>
                <li>Oldest Apt. <span id="30" style="color:orange ;"></span></li>
							</ul>
						</div>
					</div> <!-- /Category List -->

</div>

        <div class="container">
          <div class="row">
            <div class="col-sm">
              <a class="twitter-timeline" data-width="500" data-height="300" href="https://twitter.com/GreekPictures?ref_src=twsrc%5Etfw">
                Tweets by GreekPictures</a> 
                <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
            </div>
            <div class="col-sm">
              <a class="weatherwidget-io" href="https://forecast7.com/en/39d5621d77/trikala/" data-label_1="TRIKALA" data-label_2="WEATHER" data-days="3" data-theme="candy" >TRIKALA WEATHER</a>
              <script>
              !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='https://weatherwidget.io/js/widget.min.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','weatherwidget-io-js');
              </script>
            </div>
            <div class="col-sm">
              <a class="weatherwidget-io" href="https://forecast7.com/en/38d3721d43/missolonghi/" data-label_1="MESOLOGGI" data-label_2="WEATHER" data-days="3" data-theme="pure" >MESOLOGGI WEATHER</a>
              <script>
              !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='https://weatherwidget.io/js/widget.min.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','weatherwidget-io-js');
              </script>
            </div>
            <div class="col-sm">
              <a class="weatherwidget-io" href="https://forecast7.com/en/35d2424d81/crete/" data-label_1="CRETE" data-label_2="WEATHER" data-days="3" data-theme="candy" >CRETE WEATHER</a>
              <script>
              !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='https://weatherwidget.io/js/widget.min.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','weatherwidget-io-js');
              </script>
            </div>
          </div>
        </div>
        
				</div>
			</div>
		</div>
	</div>
	<!-- Container End -->
</section>



<!--============================
=            Footer            =
=============================-->

<footer class="footer section section-sm" id="Footer" style="background-color:#FBEAFF; text-align:center">
  <!-- Container Start -->
  <div class="container" >
    <div class="row">
      <div class="col-lg-3 col-md-7 offset-md-1 offset-lg-0"  >
        <!-- About -->
        <div class="block about">
          <!-- footer logo -->
          <img src="images/eglogo_resized_removebg.png" alt="">
          <!-- description -->
          <p class="alt-color" style="color:#375FA1;"><b>No worries. Just Vibes. Homey Vibes.</b></p>
        </div>
      </div>
      <!-- Link list -->
     <div class="col-lg-4 offset-lg-1 col-md-3" >
        <div class="block" >
          <h4 style="color:#375FA1;">Find Kostis</h4>
          <ul>
            <li><a href="#" style="color:#375FA1;">GitHub</a></li>
            <li><a href="#" style="color:#375FA1;">Twitter</a></li>
          </ul>
        </div>
      </div>
      <!-- Link list -->
       <div class="col-lg-4 col-md-3 offset-md-1 offset-lg-0">
        <div class="block">
          <h4 style="color:#375FA1;">Find Ioanna</h4>
          <ul>
            <li><a href="category.html" style="color:#375FA1;">GitHub</a></li>
            <li><a href="single.html" style="color:#375FA1;">Twitter</a></li>
          </ul>
        </div>
      </div>


  <!-- Container End -->
</footer >
<!-- Footer Bottom -->
<footer class="footer-bottom" style="background-color:#F2BDFF;" >
  <!-- Container Start -->
  <div class="container">
    <div class="row">
      <div class="col-sm-12 col-12">
        <!-- Copyright -->
        <div class="copyright" style="text-align:center" >
          <p style="color:#375FA1;">Copyright Â© <script>
              var CurrentYear = new Date().getFullYear()
              document.write(CurrentYear)
            </script>, Ioanna Kandi & Kostis Mavrogiorgos</p>
        </div>
      </div>
    </div>
  </div>
  <!-- Container End -->
  <!-- To Top -->
  <div class="top-to">
    <a id="top" class="" href="#"><i class="fa fa-angle-up"></i></a>
  </div>
</footer>

<!-- JAVASCRIPTS -->
<script src="plugins/jQuery/jquery.min.js"></script>
<script src="plugins/bootstrap/js/popper.min.js"></script>
<script src="plugins/bootstrap/js/bootstrap.min.js"></script>
<script src="plugins/bootstrap/js/bootstrap-slider.js"></script>
  <!-- tether js -->
<script src="plugins/tether/js/tether.min.js"></script>
<script src="plugins/raty/jquery.raty-fa.js"></script>
<script src="plugins/slick-carousel/slick/slick.min.js"></script>
<script src="plugins/jquery-nice-select/js/jquery.nice-select.min.js"></script>
<script src="plugins/fancybox/jquery.fancybox.pack.js"></script>
<script src="plugins/smoothscroll/SmoothScroll.min.js"></script>
<!-- google map -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCcABaamniA6OL5YvYSpB3pFMNrXwXnLwU&libraries=places"></script>
<script src="plugins/google-map/gmap.js"></script>
<script src="js/script.js"></script>

<script>
	$(document).ready(function() {
        //make the request to the back-end (it's a GET request, just like anything else we will use)
          $.get(
            "http://localhost:5000/getStatistics",
            {
              location: "Trikala",
			  level: 27
            })
            .done(function (response) {
              console.log(response);
			document.getElementById("1").textContent=response.avg_price;
			document.getElementById("2").textContent=response.avg_baths;
			document.getElementById("3").textContent=response.avg_rooms;
			document.getElementById("4").textContent=response.newest_house;
			document.getElementById("5").textContent=response.oldest_house;
            })
            .fail(function (response) {
              //if the response status is 500 (meaning that something is wrong), the following will be executed
              //it just shows an alert with the response from the back-end
              window.alert(response.message);
            });

			$.get(
            "http://localhost:5000/getStatistics",
            {
              location: "Mesologgi",
			  level: 27
            })
            .done(function (response) {
              console.log(response);
			document.getElementById("6").textContent=response.avg_price;
			document.getElementById("7").textContent=response.avg_baths;
			document.getElementById("8").textContent=response.avg_rooms;
			document.getElementById("9").textContent=response.newest_house;
			document.getElementById("10").textContent=response.oldest_house;
            })
            .fail(function (response) {
              //if the response status is 500 (meaning that something is wrong), the following will be executed
              //it just shows an alert with the response from the back-end
              window.alert(response.message);
            });

			$.get(
            "http://localhost:5000/getStatistics",
            {
              location: "Crete",
			  level: 27
            })
            .done(function (response) {
              console.log(response);
			document.getElementById("11").textContent=response.avg_price;
			document.getElementById("12").textContent=response.avg_baths;
			document.getElementById("13").textContent=response.avg_rooms;
			document.getElementById("14").textContent=response.newest_house;
			document.getElementById("15").textContent=response.oldest_house;
            })
            .fail(function (response) {
              //if the response status is 500 (meaning that something is wrong), the following will be executed
              //it just shows an alert with the response from the back-end
              window.alert(response.message);
            });

			$.get(
            "http://localhost:5000/getStatistics",
            {
              location: "Trikala",
			  level: 0
            })
            .done(function (response) {
              console.log(response);
			document.getElementById("16").textContent=response.avg_price;
			document.getElementById("17").textContent=response.avg_baths;
			document.getElementById("18").textContent=response.avg_rooms;
			document.getElementById("19").textContent=response.newest_house;
			document.getElementById("20").textContent=response.oldest_house;
            })
            .fail(function (response) {
              //if the response status is 500 (meaning that something is wrong), the following will be executed
              //it just shows an alert with the response from the back-end
              window.alert(response.message);
            });

			$.get(
            "http://localhost:5000/getStatistics",
            {
              location: "Mesologgi",
			  level: 0
            })
            .done(function (response) {
              console.log(response);
			document.getElementById("21").textContent=response.avg_price;
			document.getElementById("22").textContent=response.avg_baths;
			document.getElementById("23").textContent=response.avg_rooms;
			document.getElementById("24").textContent=response.newest_house;
			document.getElementById("25").textContent=response.oldest_house;
            })
            .fail(function (response) {
              //if the response status is 500 (meaning that something is wrong), the following will be executed
              //it just shows an alert with the response from the back-end
              window.alert(response.message);
            });

			$.get(
            "http://localhost:5000/getStatistics",
            {
              location: "Crete",
			  level: 0
            })
            .done(function (response) {
              console.log(response);
			document.getElementById("26").textContent=response.avg_price;
			document.getElementById("27").textContent=response.avg_baths;
			document.getElementById("28").textContent=response.avg_rooms;
			document.getElementById("29").textContent=response.newest_house;
			document.getElementById("30").textContent=response.oldest_house;
            })
            .fail(function (response) {
              //if the response status is 500 (meaning that something is wrong), the following will be executed
              //it just shows an alert with the response from the back-end
              window.alert(response.message);
            });
            document.getElementById("deals_results").style.visibility='hidden';
            document.getElementById("table_title").style.visibility='hidden';

    });

	//get houses based on location
    $("#deals").submit(function(e) {
      //prevent Default functionality
      e.preventDefault();
      //get the fields of the form based on the id
      let level = $("#category").val();
      let location = $("#location").val();
      //make the request to the back-end (it's a GET request, just like anything else we will use)
        $.get(
          "http://localhost:5000/getSelectedHouses",
          {
            location:location,
            level:level,
          })
          .done(function (response) {
            document.getElementById("deals_results").style.visibility='visible';
            document.getElementById("table_title").style.visibility='visible';

			  console.log(response)
            for (var house of response)
             {
                 //fill in the deals table
                 var markup = `<tr>
                 <td class="align-middle">${house.title}</td>
                 <td class="align-middle">${house.price}</td>
                 <td class="align-middle">${house.pricepersqm}</td>
                 <td class="align-middle">${house.level}</td>
				 <td class="align-middle">${house.bedroom}</td>
                 <td class="align-middle">${house.bathroom}</td>
				 <td class="align-middle">${house.year}</td>
                 </tr>`;
                 $("#deals_results tbody").append(markup);

             }

          })
          .fail(function (response) {
            //if the response status is 500 (meaning that something is wrong), the following will be executed
            //it just shows an alert with the response from the back-end
            window.alert(response.message);
          });
});


</script>

</body>

</html>
